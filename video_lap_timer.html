<!DOCTYPE html><html><head>  <meta charset="UTF-8">  <title>Lap Timer</title>  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <style>    * {      user-select: none;      -webkit-user-select: none;    }    body {      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;      background-color: #ffffff;      color: #111;      margin: 0;      padding: 1.5rem;      text-align: center;      position: relative;    }    video {      width: 100%;      max-width: 640px;      margin-bottom: 1rem;      border: 1px solid #ccc;      border-radius: 8px;    }    #videoContainer {      position: relative;      display: inline-block;    }    #timeOverlay {      position: absolute;      bottom: 8px;      right: 12px;      background: rgba(0, 0, 0, 0.6);      color: white;      font-size: 0.85rem;      padding: 2px 6px;      border-radius: 4px;    }    input[type="range"] {      width: 100%;      max-width: 640px;      margin: 0.5rem auto 1rem;      display: block;    }    .controls {      display: flex;      justify-content: center;      flex-wrap: wrap;      gap: 0.5rem;      margin-bottom: 1rem;    }    button {      padding: 0.6rem 1rem;      font-size: 1rem;      border: 1px solid #000;      border-radius: 6px;      background-color: #fff;      color: #000;      cursor: pointer;      transition: background 0.2s ease;    }    button:hover {      background-color: #eee;    }    #laps {      max-width: 640px;      margin: 0 auto;      text-align: left;      font-family: monospace;      font-size: 0.95rem;      background: #f7f7f7;      border: 1px solid #ddd;      border-radius: 8px;      padding: 1rem;      box-shadow: 0 2px 4px rgba(0,0,0,0.05);    }    .lap-entry {      display: flex;      justify-content: space-between;      align-items: center;      margin-bottom: 0.5rem;    }    .lap-entry button {      background-color: #fff;      color: #000;      border: 1px solid #000;      padding: 0.2rem 0.5rem;      font-size: 0.8rem;    }  </style></head><body>  <h2>Lap Timer</h2>  <input type="file" id="fileInput" accept="video/*">  <br><br>  <div id="videoContainer">    <video id="video" playsinline></video>    <div id="timeOverlay"></div>  </div>  <input type="range" id="seekbar" min="0" max="100" step="0.01" value="0">  <div class="controls">    <button id="stepBackwardBtn">&#8592;</button>    <button id="togglePlayBtn">&#9654;/&#10073;&#10073;</button>    <button id="stepForwardBtn">&#8594;</button>    <button onclick="recordLap()">Lap</button>  </div>  <div id="laps"></div>  <script>    const video = document.getElementById("video");    const seekbar = document.getElementById("seekbar");    const lapsDiv = document.getElementById("laps");    const stepBackwardBtn = document.getElementById("stepBackwardBtn");    const stepForwardBtn = document.getElementById("stepForwardBtn");    const toggleBtn = document.getElementById("togglePlayBtn");    const timeOverlay = document.getElementById("timeOverlay");    let fps = 30;    const step = 1 / fps;    let laps = [];    let holdTimeout = null;    let isHolding = false;    document.getElementById("fileInput").addEventListener("change", function () {      const file = this.files[0];      if (file) {        video.src = URL.createObjectURL(file);        video.load();        video.onloadedmetadata = () => {          seekbar.max = video.duration;        };        laps = [];        lapsDiv.innerHTML = "";      }    });    video.ontimeupdate = () => {      seekbar.value = video.currentTime;      timeOverlay.textContent = `${video.currentTime.toFixed(2)} / ${video.duration.toFixed(2)}s`;    };    seekbar.addEventListener("input", () => {      video.currentTime = seekbar.value;    });    function stepForward() {      video.pause();      video.currentTime += step;    }    function stepBackward() {      video.pause();      video.currentTime -= step;    }    const startHold = () => {      isHolding = false;      holdTimeout = setTimeout(() => {        isHolding = true;        video.playbackRate = 2.0;        video.play();      }, 500);    };    const endHold = () => {      clearTimeout(holdTimeout);      if (isHolding) {        isHolding = false;        video.playbackRate = 1.0;        if (video.paused) video.play();      }    };    toggleBtn.addEventListener("mousedown", startHold);    toggleBtn.addEventListener("touchstart", startHold);    ["mouseup", "mouseleave", "touchend"].forEach(event => {      toggleBtn.addEventListener(event, endHold);    });    toggleBtn.addEventListener("click", () => {      if (!isHolding) {        if (video.paused) {          video.playbackRate = 1.0;          video.play();        } else {          video.pause();        }      }    });    function recordLap() {      const time = video.currentTime;      const timeFixed = time.toFixed(2);      const lastTime = laps.length > 0 ? laps[laps.length - 1] : 0;      const diff = (time - lastTime).toFixed(2);      laps.push(time);      const container = document.createElement("div");      container.className = "lap-entry";      const text = document.createElement("span");      text.textContent = `${diff} Lap ${laps.length} : (${timeFixed}s)`;      const delBtn = document.createElement("button");      delBtn.textContent = "Delete";      delBtn.onclick = () => {        container.remove();      };      container.appendChild(text);      container.appendChild(delBtn);      lapsDiv.appendChild(container);    }    stepForwardBtn.addEventListener("mousedown", () => {      video.playbackRate = 0.5;      video.play();    });    stepForwardBtn.addEventListener("touchstart", () => {      video.playbackRate = 0.5;      video.play();    });    ["mouseup", "mouseleave", "touchend"].forEach(event => {      stepForwardBtn.addEventListener(event, () => {        video.pause();        video.playbackRate = 1.0;      });    });    stepForwardBtn.addEventListener("click", stepForward);    let reverseInterval;    stepBackwardBtn.addEventListener("mousedown", () => {      video.pause();      reverseInterval = setInterval(() => {        video.currentTime = Math.max(0, video.currentTime - 0.05);      }, 100);    });    stepBackwardBtn.addEventListener("touchstart", () => {      video.pause();      reverseInterval = setInterval(() => {        video.currentTime = Math.max(0, video.currentTime - 0.05);      }, 100);    });    ["mouseup", "mouseleave", "touchend"].forEach(event => {      stepBackwardBtn.addEventListener(event, () => {        clearInterval(reverseInterval);      });    });    stepBackwardBtn.addEventListener("click", stepBackward);  </script></body></html>